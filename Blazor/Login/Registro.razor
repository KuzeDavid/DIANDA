@page "/Registro"
@inject NavigationManager NavigationManager
@using Microsoft.AspNetCore.Components.Forms

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h2 class="text-center">Registro de Usuario</h2>
            <EditForm Model="@user" OnValidSubmit="@RegisterUser">
                <DataAnnotationsValidator />

                <div class="form-group">
                    <label for="userName">Nombre de Usuario</label>
                    <InputText id="userName" class="form-control" @bind-Value="@user.UserName" />
                    <ValidationMessage For="@(() => user.UserName)" />
                </div>

                <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <InputText id="email" class="form-control" @bind-Value="@user.Email" />
                    <ValidationMessage For="@(() => user.Email)" />
                </div>

                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <InputText id="password" type="password" class="form-control" @bind-Value="@user.Password" />
                    <ValidationMessage For="@(() => user.Password)" />
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirmar Contraseña</label>
                    <InputText id="confirmPassword" type="password" class="form-control" @bind-Value="@confirmPassword" />
                    <ValidationMessage For="@(() => confirmPassword)" />
                </div>

                <div class="form-group">
                    <label for="carrera">Carrera</label>
                    <select id="carrera" class="form-control" @bind="user.Carrera">
                        <option value="ISC">Ingeniería en Sistemas Computacionales</option>
                        <option value="LCD">Licenciatura en Ciencia de Datos</option>
                        <option value="IIA">Ingeniería en Inteligencia Artificial</option>
                    </select>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Registrarse</button>
                </div>
            </EditForm>
        </div>
    </div>
</div>

@code {
    public class User
    {
        public string UserName { get; set; }
        public string Email { get; set; }
        public string Password { get; set; }
        public string ConfirmPassword { get; set; }
        public string Carrera { get; set; }
    }

    User user = new User();
    string confirmPassword;

    async Task RegisterUser()
    {
        // Validar que las contraseñas coincidan
        if (user.Password != confirmPassword)
        {
            // Aquí puedes manejar la lógica para mostrar un mensaje de error
            return;
        }

        // Aquí puedes agregar la lógica para registrar al usuario
        await Task.Delay(100); // Simulando una operación asíncrona
        // Redirige al usuario a la página de inicio de sesión después del registro
        NavigationManager.NavigateTo("/Login");
    }
}
